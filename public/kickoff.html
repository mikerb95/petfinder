<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kickoff ‚Äî Petfinder</title>
    <meta name="description" content="Recorrido interactivo del proyecto Petfinder para exposici√≥n en clase." />
    <link rel="stylesheet" href="/assets/css/landing.css" />
    <style>
      /* Escenario de scrollytelling tipo Apple */
      .ko-hero { min-height: 90vh; display: grid; place-items: center; text-align: center; padding: 40px 0; }
      .ko-hero h1 { font-size: clamp(32px, 6vw, 64px); line-height: 1.05; margin: 0 0 10px; }
      .ko-hero p { color: var(--color-muted); font-size: 1.1rem; }

      .ko-stage { position: relative; height: 180vh; }
      .ko-sticky { position: sticky; top: 0; min-height: 100vh; display: grid; grid-template-columns: 1.1fr 0.9fr; align-items: center; gap: 28px; padding: 24px 0; }
      .ko-art { min-height: 50vh; display: grid; place-items: center; }
      .ko-copy h2 { font-size: clamp(24px, 4vw, 40px); margin: 0 0 12px; }
      .ko-copy p { color: var(--color-muted); font-size: 1.05rem; }

      /* Arte: QR animado */
      .qr-wrap { width: min(70vw, 520px); aspect-ratio: 1/1; border-radius: 24px; background: #0b1220; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 20px 60px rgba(0,0,0,0.45), inset 0 0 0 1px rgba(255,255,255,0.06); overflow: hidden; position: relative; }
      .qr-core { position: absolute; inset: 16px; border-radius: 16px; background:
        radial-gradient(circle at 16px 16px, transparent 14px, #0ea5e9 15px) top left,
        radial-gradient(circle at 16px 16px, transparent 14px, #22c55e 15px) top right,
        radial-gradient(circle at 16px 16px, transparent 14px, #14b8a6 15px) bottom left,
        radial-gradient(circle at 16px 16px, transparent 14px, #0ea5e9 15px) bottom right,
        repeating-linear-gradient(45deg, rgba(255,255,255,0.18) 0 8px, transparent 8px 16px);
      background-size: 50% 50%, 50% 50%, 50% 50%, 50% 50%, auto; background-position: top left, top right, bottom left, bottom right, center; background-repeat: no-repeat; filter: saturate(0.9) brightness(0.95);
      }

      /* Arte: tarjeta de panel */
      .card-demo { width: min(70vw, 540px); border-radius: 16px; background:#ffffff10; border: 1px solid rgba(255,255,255,0.12); padding: 16px; }
      .card-demo .row { display: grid; grid-template-columns: 140px 1fr; gap: 10px; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.08); }
      .card-demo .row:last-child { border-bottom: none; }
      .tag { display:inline-block; padding: 4px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.18); font-size: 12px; opacity: 0.9; }

      /* Arte: ficha p√∫blica */
      .public-demo { width: min(70vw, 520px); background:#fff; color:#111; border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.25); overflow: hidden; }
      .public-demo header { padding: 12px 16px; border-bottom: 1px solid #eee; }
      .public-demo .content { padding: 16px; }
      .public-demo .btns { display:flex; gap:8px; flex-wrap:wrap; }
      .public-demo .button { color:#111; background:#fff; border:1px solid #cfcfcf; }

      /* CTA */
      .ko-cta { padding: 60px 0 80px; text-align:center; }

      /* Animaci√≥n: estados iniciales */
      .anim-el { transform: translateY(60px) scale(0.92); opacity: 0; will-change: transform, opacity; }
      .anim-text { opacity: 0; transform: translateY(20px); }

      /* Accesibilidad: reducir movimiento */
      @media (prefers-reduced-motion: reduce) {
        .ko-stage { height: auto; }
        .ko-sticky { position: static; display:block; }
        .anim-el, .anim-text { transform: none !important; opacity: 1 !important; }
      }

      @media (max-width: 900px) {
        .ko-sticky { grid-template-columns: 1fr; }
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner" style="max-width:1100px;">
        <a class="brand" href="/">
          <span class="brand-mark">üêæ</span>
          <span class="brand-name">Petfinder</span>
        </a>
        <nav class="main-nav">
          <a class="link" href="/">Inicio</a>
          <a class="link" href="/dashboard">Panel</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="ko-hero">
        <div class="container" style="max-width:1100px;">
          <h1>Kickoff del proyecto Petfinder</h1>
          <p>Un recorrido interactivo por las funcionalidades clave: QR, ficha p√∫blica y panel del propietario. Despl√°zate para explorar.</p>
        </div>
      </section>

      <!-- Escena 1: QR -->
      <section class="ko-stage" data-anim="qr">
        <div class="container ko-sticky" style="max-width:1100px;">
          <div class="ko-art">
            <div id="qrBox" class="qr-wrap anim-el">
              <div class="qr-core"></div>
            </div>
          </div>
          <div class="ko-copy">
            <h2 class="anim-text">C√≥digos QR por mascota</h2>
            <p class="anim-text">Cada mascota tiene un QR √∫nico que apunta a <code>/p/&lt;qrId&gt;</code>. Cualquiera puede escanearlo con su c√°mara y ver c√≥mo contactarte, sin iniciar sesi√≥n.</p>
          </div>
        </div>
      </section>

      <!-- Escena 2: Panel del due√±o -->
      <section class="ko-stage" data-anim="dashboard">
        <div class="container ko-sticky" style="max-width:1100px;">
          <div class="ko-art">
            <div id="dashCard" class="card-demo anim-el">
              <div class="row"><strong>Nombre</strong><span>Mike Rodr√≠guez</span></div>
              <div class="row"><strong>Correo</strong><span>mike@example.com</span></div>
              <div class="row"><strong>Mascota</strong><span>‚ÄúRocky‚Äù <span class="tag">En casa</span></span></div>
              <div class="row"><strong>QR</strong><span>Generado en PNG / SVG</span></div>
            </div>
          </div>
          <div class="ko-copy">
            <h2 class="anim-text">Panel del propietario</h2>
            <p class="anim-text">Administra tus mascotas, genera/descarga el QR y edita datos de forma segura. Acceso protegido con JWT y MySQL en el backend.</p>
          </div>
        </div>
      </section>

      <!-- Escena 3: Ficha p√∫blica -->
      <section class="ko-stage" data-anim="public">
        <div class="container ko-sticky" style="max-width:1100px;">
          <div class="ko-art">
            <div id="publicCard" class="public-demo anim-el">
              <header><strong>Rocky</strong> ‚Äî Ficha p√∫blica</header>
              <div class="content">
                <p>Especie: Perro ‚Ä¢ Color: Marr√≥n</p>
                <p>Contacto: <strong>Mike</strong> ‚Äî <span>+57 300 000 0000</span> ‚Äî mike@example.com</p>
                <div class="btns">
                  <a class="button" href="#">Llamar</a>
                  <a class="button" href="#">SMS</a>
                  <a class="button" href="#">Correo</a>
                </div>
              </div>
            </div>
          </div>
          <div class="ko-copy">
            <h2 class="anim-text">Ficha p√∫blica de la mascota</h2>
            <p class="anim-text">Quien encuentre a la mascota accede a esta vista con lo esencial para contactarte. No necesita registrarse ni instalar apps.</p>
          </div>
        </div>
      </section>

      <!-- Escena 4: Arquitectura general -->
      <section class="ko-stage" data-anim="arch">
        <div class="container ko-sticky" style="max-width:1100px;">
          <div class="ko-art">
            <div id="archCard" class="anim-el" style="width:min(80vw,900px);">
              <svg viewBox="0 0 900 420" role="img" aria-label="Diagrama de arquitectura general" style="width:100%; height:auto;">
                <defs>
                  <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0%" stop-color="#0ea5e9" /><stop offset="100%" stop-color="#14b8a6" />
                  </linearGradient>
                </defs>
                <rect x="0" y="0" width="900" height="420" rx="16" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.08)" />
                <!-- Browser -->
                <rect x="30" y="40" width="210" height="120" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="135" y="85" text-anchor="middle" fill="#e5e7eb" font-size="16">Navegador</text>
                <text x="135" y="110" text-anchor="middle" fill="#9ca3af" font-size="12">HTML/CSS/JS</text>
                <!-- Static -->
                <rect x="330" y="30" width="240" height="80" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="450" y="70" text-anchor="middle" fill="#e5e7eb" font-size="14">Assets est√°ticos /public</text>
                <!-- Serverless -->
                <rect x="330" y="140" width="240" height="120" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="450" y="185" text-anchor="middle" fill="#e5e7eb" font-size="14">Express (Serverless)</text>
                <text x="450" y="210" text-anchor="middle" fill="#9ca3af" font-size="12">API REST / p√°ginas</text>
                <!-- DB -->
                <rect x="650" y="140" width="220" height="120" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="760" y="185" text-anchor="middle" fill="#e5e7eb" font-size="14">MySQL</text>
                <text x="760" y="210" text-anchor="middle" fill="#9ca3af" font-size="12">mysql2/promise</text>
                <!-- Arrows -->
                <path d="M240,100 C290,100 310,70 330,70" stroke="url(#g1)" stroke-width="3" fill="none" marker-end="url(#arrow)" />
                <path d="M240,120 C290,120 310,180 330,200" stroke="url(#g1)" stroke-width="3" fill="none" marker-end="url(#arrow)" />
                <path d="M570,200 L650,200" stroke="url(#g1)" stroke-width="3" fill="none" marker-end="url(#arrow)" />
                <defs>
                  <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="#14b8a6" />
                  </marker>
                </defs>
                <!-- Legend -->
                <text x="450" y="300" text-anchor="middle" fill="#9ca3af" font-size="12">Vercel enruta /assets a est√°ticos y /api|/dashboard|/p/:id a Express</text>
              </svg>
            </div>
          </div>
          <div class="ko-copy">
            <h2 class="anim-text">Arquitectura general</h2>
            <p class="anim-text">Frontend est√°tico servido desde /public, backend en Express desplegado como funci√≥n serverless y persistencia en MySQL. Los QR apuntan a URL p√∫blicas /p/:qrId.</p>
          </div>
        </div>
      </section>

      <!-- Escena 5: Modelo de datos -->
      <section class="ko-stage" data-anim="data">
        <div class="container ko-sticky" style="max-width:1100px;">
          <div class="ko-art">
            <div id="dataCard" class="anim-el" style="width:min(80vw,900px);">
              <svg viewBox="0 0 900 340" role="img" aria-label="Modelo de datos" style="width:100%; height:auto;">
                <rect x="0" y="0" width="900" height="340" rx="16" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.08)" />
                <!-- Users -->
                <rect x="80" y="60" width="300" height="180" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="230" y="88" text-anchor="middle" fill="#e5e7eb" font-size="16">users</text>
                <text x="100" y="112" fill="#9ca3af" font-size="12">id (PK)</text>
                <text x="100" y="130" fill="#9ca3af" font-size="12">name, email (unique)</text>
                <text x="100" y="148" fill="#9ca3af" font-size="12">password_hash, phone</text>
                <text x="100" y="166" fill="#9ca3af" font-size="12">created_at</text>
                <!-- Pets -->
                <rect x="520" y="60" width="300" height="200" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="670" y="88" text-anchor="middle" fill="#e5e7eb" font-size="16">pets</text>
                <text x="540" y="112" fill="#9ca3af" font-size="12">id (PK), owner_id (FK users.id)</text>
                <text x="540" y="130" fill="#9ca3af" font-size="12">name, species, breed, color</text>
                <text x="540" y="148" fill="#9ca3af" font-size="12">notes, status ('home'|'lost')</text>
                <text x="540" y="166" fill="#9ca3af" font-size="12">photo_url, qr_id (unique)</text>
                <text x="540" y="184" fill="#9ca3af" font-size="12">created_at, updated_at</text>
                <!-- Relation -->
                <line x1="380" y1="150" x2="520" y2="150" stroke="#14b8a6" stroke-width="3" />
                <text x="450" y="140" text-anchor="middle" fill="#9ca3af" font-size="12">1 : N</text>
              </svg>
            </div>
          </div>
          <div class="ko-copy">
            <h2 class="anim-text">Modelo de datos</h2>
            <p class="anim-text">Relaci√≥n 1:N entre usuarios y mascotas. Cada mascota tiene un <code>qr_id</code> √∫nico que resuelve su ficha p√∫blica y la imagen del QR (PNG/SVG).</p>
          </div>
        </div>
      </section>

      <!-- Escena 6: Despliegue y routing -->
      <section class="ko-stage" data-anim="deploy">
        <div class="container ko-sticky" style="max-width:1100px;">
          <div class="ko-art">
            <div id="deployCard" class="anim-el" style="width:min(80vw,900px);">
              <svg viewBox="0 0 900 300" role="img" aria-label="Despliegue y enrutamiento" style="width:100%; height:auto;">
                <rect x="0" y="0" width="900" height="300" rx="16" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.08)" />
                <rect x="60" y="60" width="240" height="180" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="180" y="100" text-anchor="middle" fill="#e5e7eb" font-size="14">Vercel Router</text>
                <text x="180" y="125" text-anchor="middle" fill="#9ca3af" font-size="12">vercel.json</text>
                <rect x="360" y="50" width="220" height="80" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="470" y="90" text-anchor="middle" fill="#e5e7eb" font-size="14">/public est√°tico</text>
                <rect x="360" y="160" width="220" height="80" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="470" y="200" text-anchor="middle" fill="#e5e7eb" font-size="14">/api/index.js ‚Üí Express</text>
                <line x1="300" y1="120" x2="360" y2="90" stroke="#14b8a6" stroke-width="3" />
                <line x1="300" y1="180" x2="360" y2="200" stroke="#14b8a6" stroke-width="3" />
                <text x="180" y="165" text-anchor="middle" fill="#9ca3af" font-size="12">^/assets ‚Üí est√°tico | ^/api, /dashboard, /p/:id, /login‚Ä¶ ‚Üí serverless</text>
              </svg>
            </div>
          </div>
          <div class="ko-copy">
            <h2 class="anim-text">Despliegue y enrutamiento</h2>
            <p class="anim-text">Vercel sirve los assets est√°ticos desde /public y enruta las p√°ginas din√°micas y API a la funci√≥n serverless que reusa la app de Express.</p>
          </div>
        </div>
      </section>

      <!-- Escena 7: Seguridad y JWT -->
      <section class="ko-stage" data-anim="security">
        <div class="container ko-sticky" style="max-width:1100px;">
          <div class="ko-art">
            <div id="securityCard" class="anim-el" style="width:min(80vw,900px);">
              <svg viewBox="0 0 900 300" role="img" aria-label="Seguridad y JWT" style="width:100%; height:auto;">
                <rect x="0" y="0" width="900" height="300" rx="16" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.08)" />
                <rect x="80" y="60" width="200" height="180" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="180" y="100" text-anchor="middle" fill="#e5e7eb" font-size="14">Login/Register</text>
                <rect x="350" y="60" width="200" height="180" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="450" y="100" text-anchor="middle" fill="#e5e7eb" font-size="14">JWT</text>
                <text x="450" y="125" text-anchor="middle" fill="#9ca3af" font-size="12">exp: 7 d√≠as</text>
                <rect x="620" y="60" width="200" height="180" rx="12" fill="#0f172a" stroke="rgba(255,255,255,0.12)" />
                <text x="720" y="100" text-anchor="middle" fill="#e5e7eb" font-size="14">Rutas protegidas</text>
                <text x="720" y="125" text-anchor="middle" fill="#9ca3af" font-size="12">/api/pets, /api/me</text>
                <line x1="280" y1="150" x2="350" y2="150" stroke="#14b8a6" stroke-width="3" />
                <line x1="550" y1="150" x2="620" y2="150" stroke="#14b8a6" stroke-width="3" />
                <text x="450" y="220" text-anchor="middle" fill="#9ca3af" font-size="12">Header Authorization: Bearer &lt;token&gt;</text>
              </svg>
            </div>
          </div>
          <div class="ko-copy">
            <h2 class="anim-text">Seguridad</h2>
            <p class="anim-text">Contrase√±as con bcrypt, autenticaci√≥n con JWT y middleware para proteger endpoints. Datos p√∫blicos m√≠nimos en la ficha; resto bajo login.</p>
          </div>
        </div>
      </section>

      <section class="ko-cta">
        <div class="container" style="max-width:1100px;">
          <h2>Listo para probar</h2>
          <p class="hero-subtitle">Escanea desde la p√°gina principal o crea tu cuenta para generar el QR de tu mascota.</p>
          <div style="display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:12px;">
            <a class="button button-primary" href="/register">Crear cuenta</a>
            <a class="button" href="/">Ir al inicio</a>
            <a class="button" href="/scan">Escanear QR</a>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner" style="max-width:1100px;">
        <div class="footer-credit">Creado por Mike Rodr√≠guez</div>
        <nav class="footer-nav" aria-label="Footer">
          <a href="/terms">T√©rminos</a>
          <a href="#">Privacidad</a>
        </nav>
      </div>
    </footer>

    <script>
      (function(){
        const stages = Array.from(document.querySelectorAll('.ko-stage'));
        const els = new Map();
        const lerp = (a,b,t) => a + (b-a) * t;
        const clamp01 = (x) => Math.max(0, Math.min(1, x));

        function getProgressFor(el){
          const rect = el.getBoundingClientRect();
          const vh = window.innerHeight || 1;
          const total = rect.height - vh;
          if (total <= 0) return rect.top <= 0 ? 1 : 0;
          const passed = -rect.top;
          return clamp01(passed / total);
        }

        function animQr(p){
          const box = els.get('qrBox');
          const texts = els.get('qrText');
          if (box) {
            const s = lerp(0.85, 1.1, p);
            const r = lerp(-8, 6, p);
            const y = lerp(60, 0, p);
            box.style.transform = `translateY(${y}px) scale(${s}) rotate(${r}deg)`;
            box.style.opacity = String(lerp(0,1,p));
          }
          if (texts) texts.forEach(t => {
            t.style.transform = `translateY(${lerp(20,0,p)}px)`;
            t.style.opacity = String(lerp(0,1,p));
          });
        }
        function animDash(p){
          const card = els.get('dashCard');
          const texts = els.get('dashText');
          if (card) {
            const s = lerp(0.9, 1.0, p);
            const y = lerp(60, 0, p);
            card.style.transform = `translateY(${y}px) scale(${s})`;
            card.style.opacity = String(lerp(0,1,p));
          }
          if (texts) texts.forEach(t => {
            t.style.transform = `translateY(${lerp(18,0,p)}px)`;
            t.style.opacity = String(lerp(0,1,p));
          });
        }
        function animCard(cardKey, textKey, p){
          const card = els.get(cardKey);
          const texts = els.get(textKey);
          if (card) {
            const s = lerp(0.9, 1.0, p);
            const y = lerp(60, 0, p);
            card.style.transform = `translateY(${y}px) scale(${s})`;
            card.style.opacity = String(lerp(0,1,p));
          }
          if (texts) texts.forEach(t => {
            t.style.transform = `translateY(${lerp(18,0,p)}px)`;
            t.style.opacity = String(lerp(0,1,p));
          });
        }
        function animPublic(p){
          const card = els.get('publicCard');
          const texts = els.get('publicText');
          if (card) {
            const s = lerp(0.92, 1.0, p);
            const y = lerp(60, 0, p);
            const sh = lerp(0.15, 0.35, p);
            card.style.transform = `translateY(${y}px) scale(${s})`;
            card.style.opacity = String(lerp(0,1,p));
            card.style.boxShadow = `0 12px ${Math.round(60*sh)}px rgba(0,0,0,0.25)`;
          }
          if (texts) texts.forEach(t => {
            t.style.transform = `translateY(${lerp(16,0,p)}px)`;
            t.style.opacity = String(lerp(0,1,p));
          });
        }

        function onFrame(){
          stages.forEach(section => {
            const p = getProgressFor(section);
            const type = section.dataset.anim;
            if (type === 'qr') animQr(p);
            else if (type === 'dashboard') animDash(p);
            else if (type === 'public') animPublic(p);
            else if (type === 'arch') animCard('archCard','archText', p);
            else if (type === 'data') animCard('dataCard','dataText', p);
            else if (type === 'deploy') animCard('deployCard','deployText', p);
            else if (type === 'security') animCard('securityCard','securityText', p);
          });
          rafId = requestAnimationFrame(onFrame);
        }

        // Cache refs
        els.set('qrBox', document.getElementById('qrBox'));
        els.set('qrText', sectionTexts('[data-anim="qr"]'));
  els.set('dashCard', document.getElementById('dashCard'));
        els.set('dashText', sectionTexts('[data-anim="dashboard"]'));
        els.set('publicCard', document.getElementById('publicCard'));
        els.set('publicText', sectionTexts('[data-anim="public"]'));
  els.set('archCard', document.getElementById('archCard'));
  els.set('archText', sectionTexts('[data-anim="arch"]'));
  els.set('dataCard', document.getElementById('dataCard'));
  els.set('dataText', sectionTexts('[data-anim="data"]'));
  els.set('deployCard', document.getElementById('deployCard'));
  els.set('deployText', sectionTexts('[data-anim="deploy"]'));
  els.set('securityCard', document.getElementById('securityCard'));
  els.set('securityText', sectionTexts('[data-anim="security"]'));

        function sectionTexts(sel){
          const s = document.querySelector(sel);
          return s ? Array.from(s.querySelectorAll('.anim-text')) : [];
        }

        let rafId = requestAnimationFrame(onFrame);
        window.addEventListener('beforeunload', () => cancelAnimationFrame(rafId));
      })();
    </script>
  </body>
</html>
